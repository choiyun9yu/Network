# Network

# 1. 네트워크 첫 걸음

## 1-1. 네트워크의 구조
- 네트워크(Network): Net + Work의 합성어로 그물처럼 서로 연결된 관계를 지칭
- 인터넷(Inetnet): 전세계의 큰 컴퓨터 네트워크부터 작은 컴퓨터 네트워크까지 연결하는 거대한 네트워크
- 패킷(Packet): 컴퓨터 간의 데이터를 주고받을 때 네트워크를 통해 흘러가는 작은 데이터 조각
- 대역폭(Bandwidth): 네트워크에서 이용 가능한 최대 전송 속도로 정보를 전송할 수 있는 단위 시간당 전송량
- 큰 데이터를 그대로 보내면 그 데이터가 네트워크의 대역폭을 너무 많이 점유해서 다른 패킷의 흐름을 막을 위험이 있어 패킷단위로 쪼개서 전송
- 송신부에서 쪼개서 전송한 패킷에는 번호표가 붙어있어서 수신부에서 패킷을 번호대로 재조합하는 과정 필요

## 1-2. LAN과 WAN
- LAN(Local Area Network): 건물이나 특정 지역을 범위로 하는 근거리 네트워크
  범위가 좁은 대신 속도도 빠르고 오류도 적다
- WAN(Wid Area Network): SK, KT, LG같은 인터넷 서비스 제공자(ISP)의 서비스를 이용하여 지리적으로 넓은 범위에 구축된 네트워크
  범위가 넓은 대신 속도가 느리고 오류가 상대적으로 많다

## 1-3. 가정에서 하는 LAN 구성
- 가정 내 설치된 공유기로 내부 인터넷(사설망)을 구성, LAN
- 인터넷 서비스 제공자(ISP)로부터 인터넷 회선을 받아와서 WAN과 인터넷 공유기 연결

## 1-4. 회사에서 하는 LAN 구성
- 가정에서의 LAN과 다른 점은 외부에 공개하기 위한 DMZ(DeMilitarized Zone) 네트워크 영역이 존재
  (외부 네트워크) - (라우터) - (스위치) - (컴퓨터)
#### 회사 서버가 운영되는 방식
- **온프레미스(on-premise)**: 사내 또는 데이터 센터에 서버를 두고 운영하는 것
- **클라우드(Cloud)**: 인터넷을 통해 소프트웨어나 하드웨어 등의 컴퓨팅 시스템을 제공하는 것
  
<br>
<br>
<br>

# 2. 네트워크의 기본 규칙

## 2-1. 네트워크의 규칙
- 프로토콜(Protocol): 컴퓨터 또는 전자기기 간의 원활한 통신을 위해 지키기로 약속한 규약
  프로토콜은 신호 처리법, 오류처리, 암호, 인증, 주소 등을 포함

## 2-2. OSI 모델과 TCP/IP 모델
#### OSI 모델
- 과거 같은 회사 컴퓨터끼리만 통신이 가능하거나 케이블을 연결하는 커넥터도 회사마다 상이
- 공통으로 사용하는 표준 규격을 ISO에서 제정

|계층|이름|설명|
|---|---|---|
|7계층|응용 계층|이메일&파일 전송, 웹사이트 조회 등 애플리케이션에 대한 서비스 제공|
|6계층|표현 계층|문자 코드, 압축, 암호화 등의 데이터를 변환|
|5계층|세션 계층|세션 체결, 통신 방식 결정|
|4계층|전송 계층|신뢰할 수 있는 통신을 구현|
|3계층|네트워크 계층|다른 네트워크와 통신하기 위한 경로 설정 및 논리 주소 결정|
|2계층|데이터 링크 계층|네트워크 기기간의 데이터 전송 및 물리 주소 결정|
|1계층|물리 계층|시스템 간의 물리적인 연결과 전기 신호를 변환 및 제어|

#### TCP/IP 모델
- 응용 계층: OSI의 응용, 표현, 세션 계층
- 전송 계층: OSI의 전송 계층
- 인터넷 계층: OSI의 네트워크 계층
- 네트워크 접속 계층: OSI의 데이터 링크, 물리 계층

## 2-3. 캡슐화와 역캡슐화
- 헤더: 데이터를 전송하려면 데이터 전송을 위해 필요한 정보를 앞에 하나씩 붙여서 다음 계층으로 보냄
- 캡슐화: 데이터 앞에 하나씩 헤더를 붙여나가는 과정
- 역캡슐화: 데이터를 받는 쪽에서는 헤더를 하나씩 제거하는 과정
![img1](https://velog.velcdn.com/images%2Fminj9_6%2Fpost%2F52c33fac-0e72-41b4-ac54-cd68b4485678%2Fimage.png)  
  (1) 송신 컴퓨터에서 웹 사이트에 접속하려고하면 응용 계층에서 요청 데이터를 생성해서 전송계층에 전달    
  (2) 전송 계층에서는 신뢰할 수 있는 통신이 이루어지도록 응용 계층에서 만들어진 데이터에 헤더 붙임  
  (3) 전송 계층에서 만들어진 데이터를 다른 네트워크와 통신하기 위해 네트워크 계층에서 헤더를 또 붙임  
  (4) 네트워크 계층에서 만들어진 데이터를 물리적 통신 채널에 연결하기 위해 데이터 링크 계층에서 헤더와 트레잉러를 붙임  
  \*트레일러: 데이터를 전달할 때 마지막에 추가하는 정보  
  (5) 데이터 링크 계층에서 만들어진 데이터는 최종적으로 전기 신호로 변환돼서 수신 컴퓨터에 도착  
  (6) 수신측은 각 계층의 헤더를 제거하면서 데이터를 상위 계층으로 전달(역캡슐화)  

<br>
<br>
<br>

# 3. 물리 계층 : 데이터를 전기 신호로 변환하기
물리 계층은 0과 1만으로 이루어진 비트열을 전기 신호로 변환하기 위해서 필요
## 3-1. 물리 계층의 역할과 랜 카드의 구조
#### 전기신호
- 아날로그 신호: 시간에 따라 연속적으로 변화는 신호 (전화 회선이나 라디오 방송에 사용)
- 디지털 신호: 단순히 0과 1값만 인식하는 비연속, 이산 시간 신호

#### 랜 카드
0과 1의 비트열 데이터는 전기신호로 변환하는 장치

## 3-2. 케이블의 종류와 구조
- 네트워크 전송 매체: 데이터가 흐르는 물리적인 선로로 유선과 무선으로 나뉨
  - 유선: 트위스트 페어 케이블, 광케이블 등
  - 무선: 라디오파, 마이크로파, 적외선 등
 
#### 트위스트 페어 케이블(랜 케이블)
- UTP 케이블: 비차폐 연선, 구리 선 여덟 개를 두 개씩 꼬아 만든 네 쌍의 전선으로 실드로 보호되어 있지 않은 케이블
  *쉴드: 금속호일이나 금속의 매듭과 같은 것으로 외부에서 발생하는 노이즈를 막는 역할  
  **노이즈: 데이터의 왜곡이나 분해로 인해 전송 매체에서 생기는 전자 신호
- STP 케이블: 차페 연선, 두 개씩 꼬아 만든 선을 실드로 보호한 케이블
- UTP는 쉴드로 보호되지 않아 노이즈의 영향을 받기 쉽지만 저렴하기 때문에 일반적으로 많이 사용되는 케이블
- 랜 케이블의 양쪽 끝에는 RJ-45라고 부르는 커넥터가 붙어 있는데 이 커넥터로 랜포트나 네트워크 기기에 연결

#### 다이렉트 케이블과 크로스 케이블
- 다이렉트 케이블: 구리 선 여덟 개를 같은 순서로 커넥터에 연결한 케이블,
  컴퓨터와 스위치를 연결할 때 사용
- 크로스 케이블: 구리 선 여덟 개 중 한쪽 커넥터의 1번과 2번에 연결되는 구리 선을 다른 쪽 커넥터의 3번과 6번에 연결한 케이블,
  컴퓨터 간에 직접 랜 케이블로 연결할 때 사용
- 다이렉트 케이블과 크로스 케이블 모두 실제로는 1,2,3,6,번 구리 선을 사용, 나머지 선은 미사용
- 1번과 2번은 수신하는 역할, 3번과 6번은 송신하는 역할

## 3-3. 리피터와 허브의 구조
리피터와 허브는 물리 계층에서 동작하는 네트워크 장비
#### 리피터
- 전기 신호를 정형(일그러진 전기 신호를 복원)하고 증폭하는 기능을 가진 네트워크 중계 장비
- 과거 통신하는 상대방이 멀리 있을 때 사용, 그러나 최근 다른 네트워크 장비가 리피터 기능을 지원하여 미사용  

#### 허브
- 허브는 리피터와 마찬가지로 전기 신호를 정형하고 증폭하는 기능 + 여러 대를 서로 연결하는 기능
- 전기 신호가 허브에 도착하는 동안 노이즈 영향으로 파형이 변경될 때 허브가 그 파형을 정상으로 되돌리는 것
- 허브는 포트(실제로 통신하는 통로)를 여러개 가지고 있어 컴퓨터 여러대와 통신 가능
- 단, 허브는 어떤 특정 포트로부터 데이터를 받으면 해당 포트를 제외한 나머지 모든 포트로도 받은 데이터를 전송
  (때문에 스위치라는 네트워크 장치 사용)

<br>
<br>
<br>

# 4. 데이터 링크 계층 : 랜에서 데이터 전송하기

## 4-1. 데이터 링크 계층의 역할과 이더넷
- 데이터 링크 계층은 네트워크 장비 간에 신호를 주고받는 규칙을 정하는 계층, LAN에서 데이터를 주고 받기 위해 필요
- 이더넷(Ethernet): LAN에서 적용되는 규칙, 허브와 같은 장비에 연결된 컴퓨터와 데이터를 주고 받을 때 사용
  (보내려는 목적지 정보를 추가해서 허브에 보내면 나머지 컴퓨터들은 자기께 아니면 무시하도록 규정)
- CSMA/CD: 여러 컴퓨터가 동시에 데이터를 보낼 때 충돌을 방지하기위해 이더넷 시점을 늦추는 방법
    - CS: 데이터를 보내려고 하는 컴퓨터가 케이블에 신호가 흐르고 있는지 아닌지 확인하는 규칙
    - MA: 케이블에 데이터가 흐르고 있지 않다면 데이터를 보내도 좋다는 규칙
    - CD: 충돌이 발생하고 있는지 확인하는 규칙
- 최근에는 효율이 좋지 않다는 이유로 CSMA/CD를 거의 사용하지 않음, 대신 스위치 사용

## 4-2. MAC 주소(물리 주소)의 구조
- 랜카드에는 MAC 주소라는 번호가 정해져 있음, 제조할 때 정해지고 **전 세계에서 유일한 번호로 할당**
- MAC 주소는 48비트의 숫자로 구성되는데 앞의 24비트는 랜 카드를 만드는 제조사번호, 뒤의 24비트는 일련번호
- OSI 모델에서는 데이터 링크계층, TCP/IP 모델에서는 네트워크 계층에서 이더넷 헤더와 트레일러를 붙임
- 이더넷 헤더: 목적지의 MAC 주소(6Byte), 출발지 MAC 주소(6Byte), 이더넷 유형(2Byte)로 구성
- 이더넷 유형: 이더넷으로 전송되는 상위 계층 프로토콜의 종류를 16진수로 나타냄
  - 0800: IPv4
  - 0806: ARP
  - 8035: RARP
  - 814C: SNMP over Ethernet
  - 86DD: IPv6
- 트레일러(FCS, Frame Check Sequence): 데이터 전송 도중에 오류가 발생하는지 확인하는 용도
- 프레임: 이더넷 헤더와 트레일러가 추가된 데이터, 네트워크를 통해 프레임이 전송되는 것  
  (목적지 MAC주소) - (출발지 MAC주소) - (유형) - (데이터) - (트레일러)

? ARP(Address Resolution Protocol): 목적지 컴퓨터의 IP 주소를 이용하여 MAC 주소를 찾기위한 프로토콜  
ARP 요청: 출발지 컴퓨터가 목적지 주소를 모르면 MAC 주소를 알아내기 위해 네트워크에 브로드캐스트를 하는 것  
ARP 응답: ARP 요청에 대해 지정된 IP주소를 가진 컴퓨터는 MAC 주소를 응답으로 보내는 것  
ARP 테이블: 출발지 컴퓨터가 위 과정으로 MAC 주소를 얻은 후 MAC 주소와 IP 주소의 매핑 정보를 메모리에 보관하고 일정기간이 지나면 삭제  

## 4-3. 스위치의 구조
스위치는 허브와 달리 데이터 충돌이 발생하지 않음 (외형은 허브와 비슷)
- 스위치 데이터 링크 계층에서 동작하고 레이어 2 스위치 또는 스위칭 허브라고도 불림
- 스위치: 내부에 MAC 주소 테이블이 존재
  MAC 주소 테이블: 스위치의 포트 번호와 해당 포트에 연결되어 있는 컴퓨터의 MAC 주속 등록되는 데이터베이스  
  (1) 스위치 전원을 켠 상태에서는 MAC 주소 테이블에 아무것도 등록되어 있지 않음
  (2) 송신 컴퓨터에서 목적지 MAC 주소가 추가된 프레임이 전송되면 MAC 주소테이블을 확인
  (3) MAC 주소 학습 기능: 송신 MAC 주소가 등록되어 있지 않으면 MAC 주소를 포트와 함께 등록
  (4-1) 플러딩(홍수): 수신 컴퓨터의 MAC 주소가 아직 등록되어 있지 않은 경우 송신 포트 이외의 포트에 프레임이 전달
  (4-2) MAC 주소 필터링: 수신 컴퓨터의 MAC 주소가 등록되어 있는 경우 해당 컴퓨터에게만 프레임 전달

## 4-4. 데이터가 케이블에서 충돌하지 않는 구조
#### 전이중 통신과 반이중 통신
- 전이중 통신 방식: 데이터의 송수신을 동시에 통신하는 방식
- 반이중 통신 방식: 회선 하나로 송신과 수신을 번갈아가면서 통신하는 방식
- 컴퓨터 두 대를 랜 케이블로 연결하면 전이중 통신 방식 사용
- 허브로 연결하면 허브 내부에는 송수신이 나뉘어져있지 않아 반이중 통신 방식 사용
- 스위치는 충돌이 일어나지 않는 구조로 되어있어 전이중 통신 방식 사용
  
#### 충돌 도메인
- 총돌 도메인: 충돌이 발생한 경우 그 영향이 미치는 범위
  (허브에서 충돌이 발생한 경우 허브에 연결된 모든 컴퓨터가 충돌 도메인 범위)

<br>
<br>
<br>

# 5. 네트워크 계층 : 목적지에 데이터 전달하기
## 5-1. 네트워크 계층의 역할
전 세계에는 수많은 네트워크가 있고 그 네트워크들이 서로 연결되어 거대한 인터넷을 이룸
#### 네트워크 간의 연결 구조
- 데이터 링크 계층에서 스위치와 이더넷 규칙으로 같은 네트워크에 있는 컴퓨터로는 데이터를 전송할 수 있지만,  
  인터넷이나 다른 네트워크로는 데이터를 전송할 수 없음, 새로운 규칙과 장비가 필요
- IP주소: 다른 네트워크 간에 네트워크를 식별할 수 있는 주소,
  어떤 네트워크에 어떤 컴퓨터인지 구분할 수 있도록 하는 주소
- 라우터: 데이터의 목적지가 정해지면 해당 목적지까지 어떤 경로로 가는 것이 좋은지 알려주는 장치  
- 라우팅: 목적지 IP 주소까지 어떤 겨로로 데이터를 보낼지 결정하는 것
- 라우팅 테이블: 경로 정보를 등록하고 관리하는 테이블
  
#### IP
- 네트워크 계층에서는 캡슐화할 때 IP 헤더를 붙임 
  ![img2](http://www.ktword.co.kr/img_data/5185_1.JPG)
- 데이터를 정확하게 전달하기 위해 필요한 정보 포함(출발지 IP 주소와 목적지 IP 주소가 포함되어 있음)
- IP 패킷: IP 프로토콜을 사용하여 데이터 앞에 IP 헤더를 붙여 캡슐화한 것

## 5-2. IP 주소의 구조


<br>
<br>
<br>

# 6. 전송 계층 : 신뢰할 수 있는 데이터 전송하기

<br>
<br>
<br>

# 7. 응용 계층 : 애플리케이션에 데이터 전송하기

<br>
<br>
<br>

# 8. 네트워크의 전체 흐름 살펴보기

<br>
<br>
<br>

# 9. 무선 랜 이해하기
